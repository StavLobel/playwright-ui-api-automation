{"name": "Verify distance API handles invalid airport codes gracefully", "status": "passed", "description": "\nThis test verifies that the distance calculation API properly handles\ninvalid airport codes and returns appropriate error responses.\n", "steps": [{"name": "Initialize AirportGap API client", "status": "passed", "start": 1755106982918, "stop": 1755106982918}, {"name": "Get error scenario expectations", "status": "passed", "start": 1755106982918, "stop": 1755106982918}, {"name": "Test invalid 'from' airport code", "status": "passed", "steps": [{"name": "Calculate distance between 'XXX' and 'KIX'", "status": "failed", "statusDetails": {"message": "AssertionError: Expected status code 200, got 422. Response: {'errors': [{'status': '422', 'title': 'Unable to process request', 'detail': \"Please enter valid 'from' and 'to' airports.\"}]}\n", "trace": "  File \"/Users/stavlobel/Projects/playwright-ui-api-automation/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/Users/stavlobel/Projects/playwright-ui-api-automation/src/api/airports_client.py\", line 250, in calculate_distance\n    self.verify_response_status(response, 200)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"/Users/stavlobel/Projects/playwright-ui-api-automation/src/core/base_api_client.py\", line 405, in verify_response_status\n    raise AssertionError(error_msg)\n"}, "attachments": [{"name": "Distance Calculation Error", "source": "9d0141b4-8882-4e2c-ab82-2334be883979-attachment.json", "type": "application/json"}], "parameters": [{"name": "from_airport", "value": "'XXX'"}, {"name": "to_airport", "value": "'KIX'"}], "start": 1755106982918, "stop": 1755106983081}, {"name": "Attach JSON data: 'Invalid Airport Code Error Handling'", "status": "passed", "attachments": [{"name": "Invalid Airport Code Error Handling", "source": "ec6b10fd-0c92-41f5-ad61-1d87f30854e9-attachment.json", "type": "application/json"}], "parameters": [{"name": "data", "value": "{'scenario': 'invalid_from_airport', 'from_code': 'XXX', 'to_code': 'KIX', 'error_type': 'AssertionError', 'error_message': 'Expected status code 200, got 422. Response: {\\'errors\\': [{\\'status\\': \\'422\\', \\'title\\': \\'Unable to process request\\', \\'detail\\': \"Please enter valid \\'from\\' and \\'to\\' airports.\"}]}', 'handled_correctly': True}"}, {"name": "name", "value": "'Invalid Airport Code Error Handling'"}], "start": 1755106983082, "stop": 1755106983082}], "start": 1755106982918, "stop": 1755106983082}], "attachments": [{"name": "log", "source": "59ceb142-c5a3-46b1-a6f6-df5ed8348110-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "0f71ae44-d529-4d35-b7d5-255ddfca456a-attachment.txt", "type": "text/plain"}], "start": 1755106982918, "stop": 1755106983082, "uuid": "24b4a45b-6ee2-4637-99ef-68f53eeec93b", "historyId": "d3bdb74c293610024aeaa6935434cb20", "testCaseId": "d3bdb74c293610024aeaa6935434cb20", "fullName": "tests.api.test_distance_kix_nrt#test_distance_api_handles_invalid_airport_codes", "labels": [{"name": "feature", "value": "Distance Calculation"}, {"name": "epic", "value": "API Testing"}, {"name": "story", "value": "Error Handling"}, {"name": "tag", "value": "regression"}, {"name": "tag", "value": "api"}, {"name": "parentSuite", "value": "tests.api"}, {"name": "suite", "value": "test_distance_kix_nrt"}, {"name": "host", "value": "Stavs-MacBook-Air.local"}, {"name": "thread", "value": "40139-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.api.test_distance_kix_nrt"}], "titlePath": ["tests", "api", "test_distance_kix_nrt.py"]}
