{"uid":"8c2ee4762c2525f2","name":"Verify distance API handles invalid airport codes gracefully","fullName":"tests.api.test_distance_kix_nrt#test_distance_api_handles_invalid_airport_codes","historyId":"d3bdb74c293610024aeaa6935434cb20","time":{"start":1755110643499,"stop":1755110643511,"duration":12},"description":"\nThis test verifies that the distance calculation API properly handles\ninvalid airport codes and returns appropriate error responses.\n","descriptionHtml":"<p>This test verifies that the distance calculation API properly handles<br />\ninvalid airport codes and returns appropriate error responses.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1755110642868,"stop":1755110642868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1755110642868,"stop":1755110642868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1755110642868,"stop":1755110642868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1755110642868,"stop":1755110643158,"duration":290},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1755110642868,"stop":1755110642868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_request_context","time":{"start":1755110643159,"stop":1755110643191,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_test_logging","time":{"start":1755110643499,"stop":1755110643499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_context","time":{"start":1755110643499,"stop":1755110643499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"allure_reporter","time":{"start":1755110643499,"stop":1755110643499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nThis test verifies that the distance calculation API properly handles\ninvalid airport codes and returns appropriate error responses.\n","status":"passed","steps":[{"name":"Initialize AirportGap API client","time":{"start":1755110643500,"stop":1755110643500,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Get error scenario expectations","time":{"start":1755110643500,"stop":1755110643500,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Test invalid 'from' airport code","time":{"start":1755110643500,"stop":1755110643511,"duration":11},"status":"passed","steps":[{"name":"Calculate distance between 'XXX' and 'KIX'","time":{"start":1755110643500,"stop":1755110643510,"duration":10},"status":"failed","statusMessage":"AssertionError: Expected status code 200, got 422. Response: {'errors': [{'status': '422', 'title': 'Unable to process request', 'detail': \"Please enter valid 'from' and 'to' airports.\"}]}\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/playwright-ui-api-automation/playwright-ui-api-automation/src/api/airports_client.py\", line 250, in calculate_distance\n    self.verify_response_status(response, 200)\n  File \"/home/runner/work/playwright-ui-api-automation/playwright-ui-api-automation/src/core/base_api_client.py\", line 400, in verify_response_status\n    raise AssertionError(error_msg)\n","steps":[],"attachments":[{"uid":"970132fcf42f8c8d","name":"Distance Calculation Error","source":"970132fcf42f8c8d.json","type":"application/json","size":277}],"parameters":[{"name":"from_airport","value":"'XXX'"},{"name":"to_airport","value":"'KIX'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Attach JSON data: 'Invalid Airport Code Error Handling'","time":{"start":1755110643511,"stop":1755110643511,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"831411b4d088891d","name":"Invalid Airport Code Error Handling","source":"831411b4d088891d.json","type":"application/json","size":342}],"parameters":[{"name":"data","value":"{'scenario': 'invalid_from_airport', 'from_code': 'XXX', 'to_code': 'KIX', 'error_type': 'AssertionError', 'error_message': 'Expected status code 200, got 422. Response: {\\'errors\\': [{\\'status\\': \\'422\\', \\'title\\': \\'Unable to process request\\', \\'detail\\': \"Please enter valid \\'from\\' and \\'to\\' airports.\"}]}', 'handled_correctly': True}"},{"name":"name","value":"'Invalid Airport Code Error Handling'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"37d8c79bddb6908e","name":"log","source":"37d8c79bddb6908e.txt","type":"text/plain","size":312},{"uid":"4b98f6d1eb3ef5a0","name":"stdout","source":"4b98f6d1eb3ef5a0.txt","type":"text/plain","size":1309}],"parameters":[],"stepsCount":5,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_test_logging::0","time":{"start":1755110643511,"stop":1755110643511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_request_context::0","time":{"start":1755110664489,"stop":1755110664491,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1755110664492,"stop":1755110664498,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Distance Calculation"},{"name":"story","value":"Error Handling"},{"name":"epic","value":"API Testing"},{"name":"tag","value":"regression"},{"name":"tag","value":"api"},{"name":"parentSuite","value":"tests.api"},{"name":"suite","value":"test_distance_kix_nrt"},{"name":"host","value":"pkrvmsl9tci6h6u"},{"name":"thread","value":"3657-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_distance_kix_nrt"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"2e8f18d8457639ef","status":"passed","time":{"start":1755110609328,"stop":1755110609344,"duration":16}},{"uid":"6618a06229c0991","status":"passed","time":{"start":1755110596111,"stop":1755110596149,"duration":38}},{"uid":"d922895e38a80cd2","status":"passed","time":{"start":1755106982918,"stop":1755106983082,"duration":164}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":5,"unknown":0,"total":5},"items":[{"uid":"497030fcac4f0798","status":"passed","time":{"start":1755106982918,"stop":1755106983082,"duration":164}},{"uid":"5b5cdd4da5b61776","status":"passed","time":{"start":1755106982918,"stop":1755106983082,"duration":164}},{"uid":"10b213b07eae9c69","status":"passed","time":{"start":1755106982918,"stop":1755106983082,"duration":164}},{"uid":"562d9f38de09a6c5","status":"passed","time":{"start":1755106982918,"stop":1755106983082,"duration":164}}]},"tags":["regression","api"]},"source":"8c2ee4762c2525f2.json","parameterValues":[]}